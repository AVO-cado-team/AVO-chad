
CREATE TABLE "User" (
                        id int8 generated by default as identity primary key,
                        first_name varchar(255) not null,
                        last_name varchar(255) not null,
                        username varchar(255) unique not null,
                        status int not null,
                        email varchar(255) unique not null,
                        password varchar(255) not null,
                        created_at timestamp default current_timestamp,
                        updated_at timestamp default current_timestamp
);

CREATE TABLE Chat(
                     id int8 generated by default as identity primary key,
                     title varchar(255) unique not null,
                     type int not null, 
                     last_message varchar(5000) references "Message(id),
                     created_at timestamp default current_timestamp,
                     updated_at timestamp default current_timestamp
);

CREATE TABLE chat_user(
                          id int8 generated by default as identity primary key,
                          chat_id int  references Chat(id) not null,
                          user_id int references "User"(id) not null,
                          created_at timestamp default current_timestamp,
                          updated_at timestamp default current_timestamp
);


CREATE TABLE Organization(
a);

CREATE TABLE Channel(
                        id int8 generated by default as identity primary key,
                        description varchar(3000) not null,
                        organization_id int references Organization(id),
                        chat_id int references Chat(id)
);

CREATE TABLE File(
                     id int8 generated by default as identity primary key,
                     hash varchar(255) unique not null,
                     size int not null,
                     type varchar(255) not null,
                     created_at timestamp default current_timestamp,
                     updated_at timestamp default current_timestamp
);

CREATE TABLE Message(
                        id int8 generated by default as identity primary key,
                        text varchar(3000) not null,
                        type int not null,
                        chat_id int references Chat(id),
                        user_id int references "User"(id),
                        file_id int references File(id),
                        created_at timestamp default current_timestamp,
                        updated_at timestamp default current_timestamp
);